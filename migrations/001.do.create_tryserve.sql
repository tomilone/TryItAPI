DROP TABLE IF EXISTS cards;
DROP TABLE IF EXISTS tags;
DROP TABLE IF EXISTS users;


CREATE TABLE users (
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    username TEXT NOT NULL,
    password TEXT NOT NULL,
    UNIQUE(username)
);

CREATE TABLE tags (
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    tag TEXT NOT NULL
);
CREATE TABLE cards (
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    title TEXT NOT NULL,
    content TEXT NOT NULL,
    tags INTEGER REFERENCES tags(id) ON DELETE SET NULL,
    tries INTEGER DEFAULT 0,
    author INTEGER REFERENCES users(id) ON DELETE CASCADE
);